<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" type="image/png" href="images/logo1.png">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">

  <title>virtcoin | Coming Soon</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Inter:wght@400;500&family=Inter+Tight:wght@400&display=swap" rel="stylesheet" fetchpriority="low">

  …

  <!-- scripts -->
  <script defer>
    document.addEventListener("DOMContentLoaded", () => {
      const btn = document.getElementById("wallet-connect-btn");
      if (btn) btn.addEventListener("click", connectWallet);

      fetchPrices();
      setInterval(fetchPrices, 300000); // refresh every five minutes
    });

    async function connectWallet() {
      const btn = document.getElementById("wallet-connect-btn");

      if (typeof window.ethereum === "undefined") {
        alert("MetaMask is not installed or unlocked.");
        return;
      }
      try {
        const [addr] = await window.ethereum.request({
          method: "eth_requestAccounts",
          params: []
        });
        btn.textContent = addr.slice(0, 6) + "…" + addr.slice(-4);
        btn.disabled = true;
      } catch (err) {
        if (err.code !== 4001) console.error(err);
        alert("Wallet connection was cancelled or failed.");
      }
    }

    async function fetchPrices() {
      const bar = document.getElementById("crypto-prices");
      if (!bar) return;

      try {
        const res = await fetch("https://min-api.cryptocompare.com/data/pricemulti?fsyms=BTC,ETH&tsyms=USD");
        if (!res.ok) throw new Error(res.status);
        const data = await res.json();
        updateBar(data.BTC?.USD, data.ETH?.USD);
      } catch (err) {
        console.warn("Price fetch failed:", err.message);
        bar.textContent = "Could not load prices.";
      }
    }

    function updateBar(btc, eth) {
      if (!btc || !eth) return;
      const fmt = v => v.toLocaleString("en-US", { style: "currency", currency: "USD" });
      document.getElementById("crypto-prices").innerHTML =
        "Bitcoin <strong>" + fmt(btc) + "</strong> | " +
        "Ethereum <strong>" + fmt(eth) + "</strong>";
    }
  </script>
</body>
</html>
